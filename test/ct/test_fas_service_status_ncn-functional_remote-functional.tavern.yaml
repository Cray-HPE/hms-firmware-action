# Copyright 2020 Hewlett Packard Enterprise Development LP

# Tavern test cases for the FAS service status API
# Author: Mitch Schooler
# Service: Firmware Action Service

# HMS test metrics test cases: 2
# 1. GET /service/status API response code
# 2. GET /service/status API response body
---
test_name: Verify the service status resource

stages:
  # 1. GET /service/status API response code
  # 2. GET /service/status API response body
  - name: Ensure that the FAS service status can be retrieved
    request:
      url: "{base_url}/fas/v1/service/status"
      method: GET
      headers:
        Authorization: "Bearer {access_token}"
      verify: !bool "{verify}"
    response:
      status_code: 200
      verify_response_with:
        function: tavern.testutils.helpers:validate_pykwalify
        extra_kwargs:
          schema:
            type: map
            required: True
            mapping:
              serviceStatus:
                type: str
                required: True
                enum:
                  - "running"
